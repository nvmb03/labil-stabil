<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Superman | Labil–Stabil</title>
    
    <!-- p5.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <script>
        if (typeof p5 === 'undefined') {
            document.write('<script src="p5.min.js"><\/script>');
        }
    </script>
    
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Space Mono', monospace;
            background: #F0F0F5;  /* Helles Grau-Blau */
            overflow: hidden;
        }
        canvas {
            display: block;
        }
        
        /* Icons */
        .icon-button {
            position: fixed;
            width: 50px;
            height: 50px;
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 1000;
            text-decoration: none;
            backdrop-filter: blur(10px);
        }
        
        .icon-button:hover {
            background: rgba(30, 80, 140, 0.9);  /* Tiefes Blau */
            border-color: #1E508C;
            transform: scale(1.1);
        }
        
        #backButton {
            top: 20px;
            left: 20px;
        }
        
        #infoButton {
            top: 20px;
            right: 20px;
        }
        
        /* Info Panel */
        #infoPanel {
            position: fixed;
            top: 80px;
            right: 20px;
            width: 350px;
            max-height: calc(100vh - 120px);
            background: rgba(0, 0, 0, 0.95);
            border: 2px solid #1E508C;  /* Tiefes Blau */
            border-left: 4px solid #1E508C;
            padding: 25px;
            color: #fff;
            backdrop-filter: blur(10px);
            z-index: 999;
            overflow-y: auto;
            transform: translateX(400px);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        #infoPanel.active {
            transform: translateX(0);
            opacity: 1;
        }
        
        #infoPanel h1 {
            font-size: 24px;
            margin-bottom: 15px;
            color: #1E508C;  /* Tiefes Blau */
            letter-spacing: 2px;
        }
        
        #infoPanel h2 {
            font-size: 14px;
            margin-top: 20px;
            margin-bottom: 10px;
            color: #C8192D;  /* Dunkleres Rot */
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        #infoPanel p {
            font-size: 12px;
            line-height: 1.7;
            opacity: 0.9;
            margin-bottom: 12px;
        }
        
        #infoPanel strong {
            color: #1E508C;  /* Tiefes Blau */
        }
        
        #infoPanel ul {
            list-style: none;
            padding-left: 0;
        }
        
        #infoPanel li {
            font-size: 12px;
            line-height: 1.7;
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }
        
        #infoPanel li:before {
            content: "→";
            position: absolute;
            left: 0;
            color: #1E508C;  /* Tiefes Blau */
        }
        
        /* Scrollbar styling */
        #infoPanel::-webkit-scrollbar {
            width: 6px;
        }
        
        #infoPanel::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }
        
        #infoPanel::-webkit-scrollbar-thumb {
            background: #1E508C;  /* Tiefes Blau */
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <!-- Back Button -->
    <a href="index.html" class="icon-button" id="backButton">←</a>
    
    <!-- Info Button -->
    <div class="icon-button" id="infoButton">i</div>
    
    <!-- Info Panel -->
    <div id="infoPanel">
        <h1>SUPERMAN</h1>
        
        <p><strong>Neurodivergenz:</strong> Perfektionismus / Überverantwortung</p>
        
        <h2>Mechanik</h2>
        <ul>
            <li>Folgt der Maus mit smooth easing</li>
            <li>Stoppt ein Stück VOR der Maus (nicht direkt drauf)</li>
            <li>Obere Spitze zeigt IMMER zur Maus</li>
            <li>Cape hängt zwischen zwei Zacken (gegenüber vom Kopf)</li>
        </ul>
        
        <h2>Design</h2>
        <ul>
            <li>5-zackiger blauer Stern (#0050B4)</li>
            <li>Rotes Cape (#DC143C) weht im Wind</li>
            <li>Minimalistisch, keine Augen, keine Laser</li>
            <li>Himmelblauer Hintergrund</li>
        </ul>
        
        <h2>Tragik</h2>
        <p>Superman will jeden retten, jeden Moment perfekt meistern. Doch je mehr er sich anstrengt, desto mehr entgleitet ihm die Kontrolle. Die Last der Welt auf seinen Schultern lähmt ihn, wenn es darauf ankommt.</p>
    </div>

    <script>
        // p5.js Sketch
        let star;
        
        class SupermanStar {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.angle = 0;  // Rotation des Sterns
                this.size = 35;
                
                // Stop-Distanz: Stoppt VOR der Maus!
                this.stopDistance = 80;
                
                // Idle-Mechanik
                this.idleTime = 0;
                this.idleThreshold = 1;  // Frames bis idle (ca. 0.5 Sekunden)
                this.isIdle = false;
                
                // Schwebe-Animation
                this.hoverOffset = 0;
                
                // Geschwindigkeits-Tracking für Cape-Physik
                this.velocity = 0;
                this.lastX = x;
                this.lastY = y;
                
                // Momentum für natürliche Bewegung
                this.vx = 0;
                this.vy = 0;
            }
            
            update(targetX, targetY) {
                // Richtung zur Maus
                let dx = targetX - this.x;
                let dy = targetY - this.y;
                let dist = Math.sqrt(dx * dx + dy * dy);
                
                // Bewegungs-Check
                let isMoving = false;
                
                // Wenn weiter als stopDistance: Bewegen!
                if (dist > this.stopDistance) {
                    // Smooth easing wie vorher - schnelle Verfolgung
                    let easing = 0.05;
                    let moveX = dx * easing;
                    let moveY = dy * easing;
                    
                    this.x += moveX;
                    this.y += moveY;
                    
                    // Velocity tracken
                    this.vx = moveX;
                    this.vy = moveY;
                    isMoving = true;
                } else {
                    // Maus steht: Sanftes Abbremsen mit Momentum
                    // Im Idle-Mode viel schneller abbremsen für stabiles Cape
                    let brakeFactor = this.isIdle ? 0.5 : 0.85;
                    this.vx *= brakeFactor;
                    this.vy *= brakeFactor;
                    
                    // Weiter gleiten mit Restgeschwindigkeit (nur wenn signifikant)
                    if (Math.abs(this.vx) > 0.02 || Math.abs(this.vy) > 0.02) {
                        this.x += this.vx;
                        this.y += this.vy;
                    } else {
                        // Velocity sehr klein: Komplett auf 0 setzen für stabiles Cape
                        this.vx = 0;
                        this.vy = 0;
                    }
                    
                    // Im idle sanft zurück zur richtigen Position
                    if (this.isIdle && dist > this.stopDistance - 10) {
                        this.x += dx * 0.005;
                        this.y += dy * 0.005;
                    }
                }
                
                // Geschwindigkeit berechnen (für Cape-Physik)
                this.velocity = Math.sqrt(this.vx * this.vx + this.vy * this.vy);
                
                // Idle-Mechanik
                if (isMoving || dist > this.stopDistance + 10) {
                    // Bewegung: Idle-Timer zurücksetzen
                    this.idleTime = 0;
                    this.isIdle = false;
                } else {
                    // Stillstand: Idle-Timer hochzählen
                    this.idleTime++;
                    if (this.idleTime > this.idleThreshold) {
                        this.isIdle = true;
                    }
                }
                
                // Rotation
                let targetAngle;
                
                if (this.isIdle) {
                    // Idle: Aufrecht schweben (Kopf/Spitze nach oben)
                    targetAngle = PI;
                } else {
                    // Flug: Kopf/Spitze zeigt zur Maus
                    targetAngle = Math.atan2(dy, dx) - HALF_PI;
                }
                
                // Winkel normalisieren
                let angleDiff = targetAngle - this.angle;
                while (angleDiff > PI) angleDiff -= TWO_PI;
                while (angleDiff < -PI) angleDiff += TWO_PI;
                
                // Smooth rotation - stabil und heldenhaft
                let rotationSpeed = this.isIdle ? 0.045 : 0.12;
                this.angle += angleDiff * rotationSpeed;
                
                // Schwebe-Animation im idle - smooth transition
                let targetHoverOffset = this.isIdle ? Math.sin(frameCount * 0.06) * 8 : 0;
                this.hoverOffset += (targetHoverOffset - this.hoverOffset) * 0.1;
            }
            
            drawStar() {
                // 5-zackiger Stern - obere Spitze zeigt nach oben (0°)
                beginShape();
                for (let i = 0; i < 10; i++) {
                    let angle = TWO_PI / 10 * i + TWO_PI / 20;  // Korrektur nach rechts
                    let r = (i % 2 === 0) ? this.size : this.size * 0.4;  // Lange/kurze Spitzen
                    let vx = Math.cos(angle) * r;
                    let vy = Math.sin(angle) * r;
                    vertex(vx, vy);
                }
                endShape(CLOSE);
            }
            
            drawCape() {
                // Cape-Animation - einheitliches Verhalten basierend auf Geschwindigkeit
                // Basis-Werte für Cape im Stillstand
                let baseWaveIntensity = 4;
                let baseWaveSpeed = 0.06;
                let baseGravity = 6;
                
                // Wenn idle: Cape komplett stabil (kein Jiggling)
                if (this.isIdle) {
                    this.capeVelocityFactor = 0;
                } else {
                    // Nur während Flug: Geschwindigkeit beeinflusst Cape
                    let targetVelocityFactor = Math.min(this.velocity * 3, 1);
                    if (!this.capeVelocityFactor) this.capeVelocityFactor = 0;
                    this.capeVelocityFactor += (targetVelocityFactor - this.capeVelocityFactor) * 0.15;
                }
                
                // Cape flattert etwas mehr bei Bewegung, aber nicht extrem
                let waveIntensity = baseWaveIntensity + this.capeVelocityFactor * 4;
                let waveSpeed = baseWaveSpeed + this.capeVelocityFactor * 0.04;
                
                // Gravity wird bei Bewegung weniger (Cape wird vom Wind getragen)
                let gravity = baseGravity - this.capeVelocityFactor * 3;
                
                // Mehrere Wellen für realistisches Flattern
                let wave1 = Math.sin(frameCount * waveSpeed) * waveIntensity;
                let wave2 = Math.sin(frameCount * waveSpeed + 1) * waveIntensity * 0.7;
                let wave3 = Math.sin(frameCount * waveSpeed + 2) * waveIntensity * 0.5;
                
                fill(200, 25, 45);  // Dunkleres Rot
                noStroke();
                
                beginShape();
                // Cape-Punkte mit Wellen + Gravity (nach unten gezogen)
                vertex(-20, 0);
                vertex(-30 + wave1 * 0.3, 20 + gravity * 0.2);
                vertex(-40 + wave1 * 0.6, 40 + gravity * 0.4);
                vertex(-45 + wave2 * 0.8, 60 + gravity * 0.6);
                vertex(-40 + wave3, 80 + gravity * 0.8);
                vertex(-20 + wave3 * 0.5, 70 + gravity * 0.9);
                vertex(0 + wave3 * 0.3, 75 + gravity);
                vertex(20 + wave3 * 0.5, 70 + gravity * 0.9);
                vertex(40 + wave3, 80 + gravity * 0.8);
                vertex(45 + wave2 * 0.8, 60 + gravity * 0.6);
                vertex(40 + wave1 * 0.6, 40 + gravity * 0.4);
                vertex(30 + wave1 * 0.3, 20 + gravity * 0.2);
                vertex(20, 0);
                endShape(CLOSE);
            }
            
            display() {
                // Stern und Cape - MINIMALISTISCH!
                push();
                translate(this.x, this.y + this.hoverOffset);
                
                // Cape ZUERST (hinten) - 180° gedreht! (entgegengesetzt zum Kopf)
                push();
                rotate(this.angle + PI);  // + PI = 180° entgegengesetzt!
                this.drawCape();
                pop();
                
                // Stern DARÜBER (vorne)
                push();
                rotate(this.angle);
                fill(30, 80, 140);  // Tiefes Blau
                noStroke();
                this.drawStar();
                pop();
                
                pop();
            }
        }
        
        function setup() {
            createCanvas(windowWidth, windowHeight);
            star = new SupermanStar(width / 2, height / 2);
        }
        
        function draw() {
            background(240, 240, 245);  // Helles Grau-Blau - clean & minimalistisch
            
            // Superman updaten und zeichnen
            star.update(mouseX, mouseY);
            star.display();
        }
        
        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
        }
    </script>

    <script>
        // Info Panel Toggle
        const infoButton = document.getElementById('infoButton');
        const infoPanel = document.getElementById('infoPanel');
        
        infoButton.addEventListener('click', () => {
            infoPanel.classList.toggle('active');
        });
        
        // Close panel when clicking outside
        document.addEventListener('click', (e) => {
            if (!infoPanel.contains(e.target) && e.target !== infoButton) {
                infoPanel.classList.remove('active');
            }
        });
    </script>
</body>
</html>